<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Nh√† S√°ch Online</title>
  <link rel="stylesheet" href="assets/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
  
<header class="topbar">
  <div class="logo">
    <a href="index.html"><img src="images/Logo.png" alt="Logo"> </a>
  </div>
  <div class="search-center">
    <input id="topSearch" class="search-input" placeholder="T√¨m s√°ch, t√°c gi·∫£ ho·∫∑c ISBN..." />
  </div>
  <div class="auth-cart">
     <div id="authArea">
        <button class="btn-auth" onclick="window.location.href='login.html'">ƒêƒÉng nh·∫≠p</button>
        <button class="btn-auth btn-signup" onclick="window.location.href='register.html'">ƒêƒÉng k√Ω</button>
      </div>
  </div>
</header>

<nav class="navbar" id="mainNav">
  <ul class="menu" id="mainMenu">
    <li><a href="index.html">Trang ch·ªß</a></li>
    <li><a href="about.html">Gi·ªõi thi·ªáu</a></li> 
     <div class="category-menu">
 <button class="category-btn" onclick="window.location.href='category.html'">
  Danh m·ª•c s√°ch ‚ñæ
</button>
  <ul class="book-filter">

    <!-- VƒÉn h·ªçc -->
            <li class="dropdown">
              <a href="category.html?category=VƒÉn h·ªçc" data-category="VƒÉn h·ªçc">VƒÉn h·ªçc ‚ñ∏</a>
              <ul class="dropdown-content">
                <li><a href="category.html?category=VƒÉn h·ªçc&subcategory=Ti·ªÉu thuy·∫øt" data-category="VƒÉn h·ªçc" data-subcategory="Ti·ªÉu thuy·∫øt">Ti·ªÉu thuy·∫øt</a></li>
                <li><a href="category.html?category=VƒÉn h·ªçc&subcategory=Truy·ªán ng·∫Øn" data-category="VƒÉn h·ªçc" data-subcategory="Truy·ªán ng·∫Øn">Truy·ªán ng·∫Øn</a></li>
                <li><a href="category.html?category=VƒÉn h·ªçc&subcategory=Th∆°" data-category="VƒÉn h·ªçc" data-subcategory="Th∆°">Th∆°</a></li>
              </ul>
            </li>

            <!-- Kinh t·∫ø -->
            <li class="dropdown">
              <a href="category.html?category=Kinh t·∫ø" data-category="Kinh t·∫ø">Kinh t·∫ø ‚ñ∏</a>
              <ul class="dropdown-content">
                <li><a href="category.html?category=Kinh t·∫ø&subcategory=Qu·∫£n tr·ªã" data-category="Kinh t·∫ø" data-subcategory="Qu·∫£n tr·ªã">Qu·∫£n tr·ªã</a></li>
                <li><a href="category.html?category=Kinh t·∫ø&subcategory=T√†i ch√≠nh" data-category="Kinh t·∫ø" data-subcategory="T√†i ch√≠nh">T√†i ch√≠nh</a></li>
                <li><a href="category.html?category=Kinh t·∫ø&subcategory=Marketing" data-category="Kinh t·∫ø" data-subcategory="Marketing">Marketing</a></li>
              </ul>
            </li>

            <!-- Thi·∫øu nhi -->
            <li class="dropdown">
              <a href="category.html?category=Thi·∫øu nhi" data-category="Thi·∫øu nhi">Thi·∫øu nhi ‚ñ∏</a>
              <ul class="dropdown-content">
                <li><a href="category.html?category=Thi·∫øu nhi&subcategory=Truy·ªán tranh" data-category="Thi·∫øu nhi" data-subcategory="Truy·ªán tranh">Truy·ªán tranh</a></li>
                <li><a href="category.html?category=Thi·∫øu nhi&subcategory=Gi√°o d·ª•c" data-category="Thi·∫øu nhi" data-subcategory="Gi√°o d·ª•c">Gi√°o d·ª•c</a></li>
              </ul>
            </li>

            <!-- Gi√°o khoa -->
            <li class="dropdown">
              <a href="category.html?category=Gi√°o khoa" data-category="Gi√°o khoa">Gi√°o khoa ‚ñ∏</a>
              <ul class="dropdown-content">
                <li><a href="category.html?category=Gi√°o khoa&subcategory=C·∫•p 1" data-category="Gi√°o khoa" data-subcategory="C·∫•p 1">C·∫•p 1</a></li>
                <li><a href="category.html?category=Gi√°o khoa&subcategory=C·∫•p 2" data-category="Gi√°o khoa" data-subcategory="C·∫•p 2">C·∫•p 2</a></li>
                <li><a href="category.html?category=Gi√°o khoa&subcategory=C·∫•p 3" data-category="Gi√°o khoa" data-subcategory="C·∫•p 3">C·∫•p 3</a></li>
              </ul>
    </li>
  </ul>
</div>
</div>
      <div class="dropdown" id="catDropdown"></div>
    </li>
    <li><a href="news.html">Tin t·ª©c</a></li>
  </ul>
  <div class="cart-float" id="cartFloat"><button id="cartBtnFloat" class="btn"><span class="cart-icon">üõí</span> <span id="cart-count" class="cart-count">0</span></button></div>
</nav>
  </header>
<body>
  <header class="profile-header">
    <div class="container flex-between">
      <div style="display:flex;align-items:center;gap:12px"><img src="images/Logo.png" width="44" style="border-radius:8px"/><h2>Bookly</h2></div>
      <div><a href="index.html" class="btn">V·ªÅ trang ch·ªß</a></div>
    </div>
  </header>

  <main class="container">
    <h3>H·ªì s∆° c·ªßa b·∫°n: <span id="usernameDisplay"></span></h3>
    <div id="profileInfo" class="profile-info"></div>

    <section>
      <h4>ƒê∆°n h√†ng c·ªßa b·∫°n</h4>
      <div id="ordersContainer" class="orders-list"></div>
    </section>
  </main>

<script>
const storage = { get(k,def){try{return JSON.parse(localStorage.getItem(k)) ?? def}catch(e){return def}}, set(k,v){localStorage.setItem(k,JSON.stringify(v))} };
let session = storage.get('session', null);
const users = storage.get('users', {});

function renderProfile(){
  const user = session;
  document.getElementById('usernameDisplay').textContent = user || '(ch∆∞a ƒëƒÉng nh·∫≠p)';
  if(!user){ document.getElementById('profileInfo').innerHTML = '<a href="login.html" class="btn">ƒêƒÉng nh·∫≠p</a> <a href="register.html" class="btn ghost">ƒêƒÉng k√Ω</a>'; return; }
  const u = users[user] || {orders:[]};
  document.getElementById('profileInfo').innerHTML = '<div>Email: '+user+' (demo)</div>';
  const cont = document.getElementById('ordersContainer'); cont.innerHTML='';
  if(!u.orders || u.orders.length===0){ cont.innerHTML='<p>B·∫°n ch∆∞a c√≥ ƒë∆°n h√†ng.</p>'; return; }
  u.orders.slice().reverse().forEach(o=>{
    const box = document.createElement('div'); box.className='order-box';
    const meta = document.createElement('div'); meta.className='order-meta';
    const left = document.createElement('div'); left.innerHTML = '<strong>ƒê∆°n #'+o.id+'</strong><div style="color:#6b7280">'+ (new Date(o.created)).toLocaleString() +'</div>';
    const right = document.createElement('div'); right.innerHTML = '<span class="status-badge status-'+o.status.replace(/\s/g,'\\ ')+'">'+o.status+'</span>';
    meta.appendChild(left); meta.appendChild(right);
    const items = document.createElement('div'); items.className='order-items';
    o.items.forEach(it=>{ const p = {title: 'S·∫£n ph·∫©m '+it.id}; items.innerHTML += '<div>- ID:'+it.id+' x'+it.qty+'</div>'; });
    box.appendChild(meta); box.appendChild(items);
    cont.appendChild(box);
  });
}

renderProfile();
</script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
