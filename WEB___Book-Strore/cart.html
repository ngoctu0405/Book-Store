<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gi·ªè H√†ng - Literary Haven</title>
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="bootstrap-5.3.2-dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <style>
    /* CH·ªàNH S·ª¨A: S·ª≠a l·ªói c√∫ ph√°p, th√™m padding: 0 v√† box-sizing: border-box */
    *{
      margin: 0;
      padding: 0;
      box-sizing: border-box; 
    }
    /* Custom styles cho cart page */
    .container {
      max-width: 1400px;
      margin: 2rem auto;
      padding: 0 2rem;
      position: relative;
      top: 5rem;
    }

    .cart-heading {
      font-size: 2.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, #4f9da6 0%, #82c09a 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 2rem;
      text-align: center;
    }

    .cart-layout {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 2rem;
    }

    .cart-items-section, .checkout-section {
      background: #fff;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
    }
    
    .cart-item {
      display: flex;
      align-items: center;
      padding: 1rem 0;
      border-bottom: 1px solid #eee;
    }
    
    .cart-item-img {
      width: 80px;
      height: 100px;
      object-fit: cover;
      border-radius: 8px;
      margin-right: 1rem;
    }
    
    .item-details {
      flex-grow: 1;
    }
    
    .item-name {
      font-weight: 600;
      font-size: 1.1rem;
    }
    
    .item-price {
      color: #e74c3c;
      font-weight: 700;
    }

    .item-controls {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-left: auto;
    }

    .qty-control {
        display: flex;
        border: 1px solid #ddd;
        border-radius: 5px;
        overflow: hidden;
    }
    .qty-btn {
        background: #f8f9fa;
        border: none;
        padding: 0.2rem 0.5rem;
        cursor: pointer;
        font-weight: 600;
    }
    .qty-input {
        width: 40px;
        border: none;
        text-align: center;
        padding: 0.2rem 0;
    }
    
    .remove-btn {
      color: #e74c3c;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      margin-left: 1rem;
    }

    .checkout-section h3 {
      font-size: 1.4rem;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid #eee;
    }

    .summary-row {
      display: flex;
      justify-content: space-between;
      padding: 0.5rem 0;
      font-size: 1rem;
    }

    .summary-row.total {
      font-size: 1.5rem;
      font-weight: 700;
      color: #4f9da6;
      border-top: 2px solid #82c09a;
      margin-top: 1rem;
      padding-top: 1rem;
    }

    .summary-row.total .value {
        color: #e74c3c;
    }

    .btn-checkout {
      width: 100%;
      padding: 1rem;
      margin-top: 1.5rem;
      background: linear-gradient(135deg, #ff7f50 0%, #ff4500 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1.2rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-checkout:hover:not(:disabled) {
      background: linear-gradient(135deg, #ff6347 0%, #e63900 100%);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(255, 99, 71, 0.4);
    }
    
    .empty-cart {
        text-align: center;
        padding: 5rem 0;
    }
    
    .empty-cart h2 {
        color: #888;
        font-weight: 500;
    }
    .empty-cart-icon {
        font-size: 4rem;
        color: #ccc;
        margin-bottom: 1rem;
    }
    .empty-cart a {
        display: inline-block;
        margin-top: 1.5rem;
        padding: 0.8rem 2rem;
        background: linear-gradient(135deg, #4f9da6 0%, #7fb3d3 100%);
        color: white;
        text-decoration: none;
        border-radius: 8px;
        font-weight: 600;
    }

    .btn-checkout:disabled {
        background: #ccc;
        cursor: not-allowed;
    }

    .customer-info-section .form-group {
        margin-bottom: 1rem;
    }
    .customer-info-section label {
        font-weight: 600;
        margin-bottom: 0.3rem;
    }

  </style>
</head>

<body>
  <header class="topbar">
      <div class="logo">
        <a href="index.html"><img src="images/Logo.png" alt="Logo" /> </a>
      </div>

      <div class="search-center">
        <input
          id="topSearch"
          class="search-input"
          type="text"
          placeholder="Nh·∫≠p t√™n cu·ªën s√°ch b·∫°n ƒëang t√¨m ..."
          autocomplete="off"
        />
        <button class="search-btn" type="button">T√¨m ki·∫øm</button>
      </div>

      <div class="auth-cart">
        <div id="authArea">
          <button class="btn-auth" onclick="openLoginModal()">ƒêƒÉng nh·∫≠p</button>
          <button class="btn-auth btn-signup" onclick="openRegisterModal()">
            ƒêƒÉng k√Ω
          </button>
        </div>
      </div>
  </header>

   <nav class="navbar" id="mainNav">
      <ul class="menu" id="mainMenu">
        <li><a href="index.html">Trang ch·ªß</a></li>
        <li><a href="about.html">Gi·ªõi thi·ªáu</a></li>
        <div class="category-menu">
          <button
            class="category-btn"
            onclick="window.location.href='category.html'"
          >
            Danh m·ª•c s√°ch ‚ñæ
          </button>

          <ul class="book-filter">
            <li class="dropdown">
              <a href="category.html?category=VƒÉn h·ªçc" data-category="VƒÉn h·ªçc"
                >VƒÉn h·ªçc ‚ñ∏</a
              >
              <ul class="dropdown-content">
                <li>
                  <a
                    href="category.html?category=VƒÉn h·ªçc&subcategory=Ti·ªÉu thuy·∫øt"
                    >Ti·ªÉu thuy·∫øt</a
                  >
                </li>
                <li>
                  <a
                    href="category.html?category=VƒÉn h·ªçc&subcategory=Truy·ªán ng·∫Øn"
                    >Truy·ªán ng·∫Øn</a
                  >
                </li>
                <li>
                  <a href="category.html?category=VƒÉn h·ªçc&subcategory=Th∆°"
                    >Th∆°</a
                  >
                </li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="category.html?category=Kinh t·∫ø">Kinh t·∫ø ‚ñ∏</a>
              <ul class="dropdown-content">
                <li>
                  <a href="category.html?category=Kinh t·∫ø&subcategory=Qu·∫£n tr·ªã"
                    >Qu·∫£n tr·ªã</a
                  >
                </li>
                <li>
                  <a href="category.html?category=Kinh t·∫ø&subcategory=T√†i ch√≠nh"
                    >T√†i ch√≠nh</a
                  >
                </li>
                <li>
                  <a href="category.html?category=Kinh t·∫ø&subcategory=Marketing"
                    >Marketing</a
                  >
                </li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="category.html?category=Thi·∫øu nhi">Thi·∫øu nhi ‚ñ∏</a>
              <ul class="dropdown-content">
                <li>
                  <a
                    href="category.html?category=Thi·∫øu nhi&subcategory=Truy·ªán tranh"
                    >Truy·ªán tranh</a
                  >
                </li>
                <li>
                  <a
                    href="category.html?category=Thi·∫øu nhi&subcategory=Gi√°o d·ª•c"
                    >Gi√°o d·ª•c</a
                  >
                </li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="category.html?category=Gi√°o khoa">Gi√°o khoa ‚ñ∏</a>
              <ul class="dropdown-content">
                <li>
                  <a href="category.html?category=Gi√°o khoa&subcategory=C·∫•p 1"
                    >C·∫•p 1</a
                  >
                </li>
                <li>
                  <a href="category.html?category=Gi√°o khoa&subcategory=C·∫•p 2"
                    >C·∫•p 2</a
                  >
                </li>
                <li>
                  <a href="category.html?category=Gi√°o khoa&subcategory=C·∫•p 3"
                    >C·∫•p 3</a
                  >
                </li>
              </ul>
            </li>
          </ul>
        </div>
        <li><a href="news.html">Tin t·ª©c</a></li>
      </ul>
      <div class="cart-float" id="cartFloat">
        <button id="cartBtnFloat" class="btn">
          <span class="cart-icon">üõí</span>
          <span id="cart-count" class="cart-count">0</span>
        </button>
      </div>
    </nav>
    
  <div class="container">
    <h1 class="cart-heading">üõí Gi·ªè H√†ng C·ªßa B·∫°n</h1>

    <div id="cartContent">
        </div>
  </div>

  <footer>
    <div class="footer-content">
        <div class="footer-section">
            <h3>V·ªÅ Ch√∫ng t√¥i</h3>
            <ul>
                <li><a href="about.html">Gi·ªõi thi·ªáu</a></li>
                <li><a href="./news.html">Tin t·ª©c</a></li>
                <li><a href="./privacy_policy.html">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></li>
                <li><a href="./terms-of-use.html">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a></li>
            </ul>
        </div>

        <div class="footer-section">
            <h3>H·ªó tr·ª£ kh√°ch h√†ng</h3>
            <ul>
                <li><a href="./shopping_guide.html">H∆∞·ªõng d·∫´n mua h√†ng</a></li>
                <li><a href="./exchange-policy.html">Ch√≠nh s√°ch ƒë·ªïi tr·∫£</a></li>
                <li><a href="./warranty-policy.html">Ch√≠nh s√°ch b·∫£o h√†nh</a></li>
                <li>
                    <a href="./frequently-asked-questions.html">C√¢u h·ªèi th∆∞·ªùng g·∫∑p</a>
                </li>
            </ul>
        </div>

        <div class="footer-section">
            <h3>Ch√≠nh s√°ch</h3>
            <ul>
                <li><a href="./payment-policy.html">Ch√≠nh s√°ch thanh to√°n</a></li>
                <li><a href="./shipping-policy.html">Ch√≠nh s√°ch v·∫≠n chuy·ªÉn</a></li>
                <li><a href="./warranty-policy.html">Ch√≠nh s√°ch b·∫£o h√†nh</a></li>
                <li><a href="./exchange-policy.html">Ch√≠nh s√°ch ƒë·ªïi tr·∫£</a></li>
            </ul>
        </div>

        <div class="footer-section contact-info">
            <h3>Li√™n h·ªá</h3>
            <p>üìç 123 Nguy·ªÖn VƒÉn Linh, Q7, TP.HCM</p>
            <p>üìû Hotline: 1900 xxxx</p>
            <p>‚úâÔ∏è Email: support@bookstore.vn</p>
            <p>üïê Gi·ªù l√†m vi·ªác: 8:00 - 22:00</p>
            <div class="social-links">
                <a href="#">f</a>
                <a href="#">üì∑</a>
                <a href="#">‚ñ∂Ô∏è</a>
                <a href="#">üíº</a>
            </div>
        </div>
    </div>

    <div class="footer-bottom">
        <p>&copy; 2025 Book Store. All rights reserved. | Designed with ‚ù§Ô∏è</p>
    </div>
  </footer>
  
<div id="loginModal" class="auth-modal">
  </div>

<div id="registerModal" class="auth-modal">
  </div>

<div id="profileModal" class="auth-modal">
  </div>

<script src="bootstrap-5.3.2-dist/js/bootstrap.bundle.min.js"></script>
  <script src="assets/js/main.js"></script>

  <script>
    // === CONSTANTS ===
    const SHIPPING_FEE = 30000; // Ph√≠ v·∫≠n chuy·ªÉn c·ªë ƒë·ªãnh
    const DISCOUNT_RATE = 0.05; // Gi·∫£m 5% cho ƒë∆°n h√†ng > 500k

    // === CART MANAGEMENT HELPERS (ƒê∆∞·ª£c gi·∫£ ƒë·ªãnh c√≥ trong main.js, n·∫øu kh√¥ng c√≥, c·∫ßn ƒë·ªãnh nghƒ©a) ===
    // ƒê·ªÉ ƒë·∫£m b·∫£o code ho·∫°t ƒë·ªông ƒë·ªôc l·∫≠p, t√¥i s·∫Ω ƒë·ªãnh nghƒ©a l·∫°i c√°c h√†m c∆° b·∫£n:
    function getCartItems() {
        try {
            return JSON.parse(localStorage.getItem('bs_cart')) || [];
        } catch {
            return [];
        }
    }

    function saveCart(items) {
        localStorage.setItem('bs_cart', JSON.stringify(items));
        if (typeof updateCartUI === 'function') updateCartUI(); // C·∫≠p nh·∫≠t icon gi·ªè h√†ng
    }

    function clearCart() {
        localStorage.removeItem('bs_cart');
        if (typeof updateCartUI === 'function') updateCartUI(); // C·∫≠p nh·∫≠t icon gi·ªè h√†ng
    }

    // === DATA HELPERS (ƒê∆∞·ª£c gi·∫£ ƒë·ªãnh c√≥ trong main.js) ===
    // function getData() {...} 
    // function updateProductStock(items) {...} 
    // function formatCurrency(amount) {...} 
    
    if (typeof formatCurrency !== 'function') {
        function formatCurrency(amount) {
            if (typeof amount !== 'number') return '0 ‚Ç´';
            return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(amount);
        }
    }

    // === CORE LOGIC - C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng trong gi·ªè h√†ng ===

    function updateItemQuantity(productId, delta) {
        let cartItems = getCartItems();
        const itemIndex = cartItems.findIndex(item => item.id === productId);

        if (itemIndex > -1) {
            let item = cartItems[itemIndex];
            const newQty = item.qty + delta;

            // L·∫•y t·ªìn kho ƒë·ªÉ ki·ªÉm tra
            const data = typeof getData === 'function' ? getData() : { products: [] };
            const product = data.products.find(p => p.id === productId);
            const stockQty = (product && typeof product.qty === 'number') ? product.qty : Infinity;
            
            if (newQty < 1) {
                // X√≥a s·∫£n ph·∫©m n·∫øu s·ªë l∆∞·ª£ng < 1
                cartItems.splice(itemIndex, 1);
                alert('ƒê√£ x√≥a s·∫£n ph·∫©m kh·ªèi gi·ªè h√†ng.');
            } else if (newQty > stockQty) {
                alert(`Xin l·ªói, ch·ªâ c√≤n ${stockQty} s·∫£n ph·∫©m trong kho. Kh√¥ng th·ªÉ tƒÉng th√™m.`);
                return; // Kh√¥ng thay ƒë·ªïi s·ªë l∆∞·ª£ng
            } else {
                item.qty = newQty;
            }
            
            saveCart(cartItems);
            renderCart(); // Render l·∫°i gi·ªè h√†ng sau khi thay ƒë·ªïi
        }
    }

    function removeItem(productId) {
        let cartItems = getCartItems();
        const initialLength = cartItems.length;
        cartItems = cartItems.filter(item => item.id !== productId);
        
        if (cartItems.length < initialLength) {
            saveCart(cartItems);
            renderCart();
        }
    }

    // === RENDERING & CALCULATIONS ===

    function calculateCartTotals(cartDetails) {
        const subtotal = cartDetails.reduce((sum, item) => sum + item.totalPrice, 0);
        
        let discount = 0;
        if (subtotal > 500000) { // Gi·∫£m 5% cho ƒë∆°n h√†ng tr√™n 500,000 ‚Ç´
            discount = subtotal * DISCOUNT_RATE;
        }

        const total = subtotal - discount + SHIPPING_FEE;

        return { subtotal, discount, shipping: SHIPPING_FEE, total };
    }

    function renderCart() {
        const cartContent = document.getElementById('cartContent');
        const rawCartItems = getCartItems();

        if (rawCartItems.length === 0) {
            cartContent.innerHTML = `
                <div class="empty-cart">
                    <span class="empty-cart-icon">üõçÔ∏è</span>
                    <h2>Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng</h2>
                    <p>H√£y th√™m c√°c cu·ªën s√°ch y√™u th√≠ch c·ªßa b·∫°n v√†o gi·ªè h√†ng nh√©!</p>
                    <a href="index.html">Ti·∫øp t·ª•c mua s·∫Øm</a>
                </div>
            `;
            return;
        }

        // L·∫•y d·ªØ li·ªáu s·∫£n ph·∫©m t·ª´ h·ªá th·ªëng (gi·∫£ ƒë·ªãnh d√πng getData() t·ª´ main.js)
        const productsData = typeof getData === 'function' ? getData().products : [];

        // K·∫øt h·ª£p d·ªØ li·ªáu gi·ªè h√†ng v·ªõi chi ti·∫øt s·∫£n ph·∫©m
        const cartDetails = rawCartItems.map(cartItem => {
            const product = productsData.find(p => p.id === cartItem.id) || {};
            return {
                ...cartItem,
                name: product.name || 'S·∫£n ph·∫©m kh√¥ng r√µ',
                price: product.price || 0,
                img: product.img || 'images/placeholder.jpg',
                stockQty: product.qty || 0,
                totalPrice: (product.price || 0) * cartItem.qty
            };
        }).filter(item => item.price > 0); // Lo·∫°i b·ªè s·∫£n ph·∫©m kh√¥ng t√¨m th·∫•y

        const totals = calculateCartTotals(cartDetails);

        let itemsHTML = cartDetails.map(item => `
            <div class="cart-item" data-id="${item.id}">
                <img src="${item.img}" alt="${item.name}" class="cart-item-img">
                <div class="item-details">
                    <div class="item-name">${item.name}</div>
                    <div class="item-price">${formatCurrency(item.price)}</div>
                    <small class="text-muted">C√≤n l·∫°i: ${item.stockQty} cu·ªën</small>
                </div>
                <div class="item-controls">
                    <div class="qty-control">
                        <button class="qty-btn" onclick="updateItemQuantity(${item.id}, -1)">-</button>
                        <input type="number" class="qty-input" value="${item.qty}" min="1" max="${item.stockQty}" readonly>
                        <button class="qty-btn" onclick="updateItemQuantity(${item.id}, 1)" ${item.qty >= item.stockQty ? 'disabled' : ''}>+</button>
                    </div>
                    <div class="item-price fw-bold">${formatCurrency(item.totalPrice)}</div>
                    <button class="remove-btn" onclick="removeItem(${item.id})">‚ùå</button>
                </div>
            </div>
        `).join('');

        // HTML cho layout gi·ªè h√†ng
        cartContent.innerHTML = `
            <div class="cart-layout">
                <div class="cart-items-section">
                    <h3>S·∫£n ph·∫©m (${cartDetails.length})</h3>
                    <div id="cartItemsList">
                        ${itemsHTML}
                    </div>
                </div>

                <div class="checkout-section">
                    <form id="checkoutForm" onsubmit="handleCheckout(event)">
                        <h3>Th√¥ng tin kh√°ch h√†ng</h3>
                        <div class="customer-info-section">
                            <div class="form-group">
                                <label for="customerName">H·ªç v√† t√™n *</label>
                                <input type="text" id="customerName" class="form-control" required value="">
                            </div>
                            <div class="form-group">
                                <label for="customerPhone">S·ªë ƒëi·ªán tho·∫°i *</label>
                                <input type="tel" id="customerPhone" class="form-control" required value="">
                            </div>
                            <div class="form-group">
                                <label for="customerAddress">ƒê·ªãa ch·ªâ nh·∫≠n h√†ng *</label>
                                <input type="text" id="customerAddress" class="form-control" required value="">
                            </div>
                            <div class="form-group">
                                <label for="paymentMethod">Ph∆∞∆°ng th·ª©c thanh to√°n</label>
                                <select id="paymentMethod" class="form-control">
                                    <option value="cod">Thanh to√°n khi nh·∫≠n h√†ng (COD)</option>
                                    <option value="banktransfer">Chuy·ªÉn kho·∫£n ng√¢n h√†ng</option>
                                </select>
                            </div>
                        </div>

                        <h3>T√≥m t·∫Øt ƒë∆°n h√†ng</h3>
                        <div class="summary-row">
                            <span>T·∫°m t√≠nh:</span>
                            <span class="value">${formatCurrency(totals.subtotal)}</span>
                        </div>
                        <div class="summary-row">
                            <span>Gi·∫£m gi√° (5%):</span>
                            <span class="value text-danger">-${formatCurrency(totals.discount)}</span>
                        </div>
                        <div class="summary-row">
                            <span>Ph√≠ v·∫≠n chuy·ªÉn:</span>
                            <span class="value">${formatCurrency(totals.shipping)}</span>
                        </div>
                        <div class="summary-row total">
                            <span>T·ªïng c·ªông:</span>
                            <span class="value">${formatCurrency(totals.total)}</span>
                        </div>

                        <button type="submit" class="btn-checkout">
                            TI·∫æN H√ÄNH THANH TO√ÅN
                        </button>
                    </form>
                </div>
            </div>
        `;

        // T·ª± ƒë·ªông ƒëi·ªÅn th√¥ng tin ng∆∞·ªùi d√πng n·∫øu ƒë√£ ƒëƒÉng nh·∫≠p
        fillCustomerInfo();
    }

    function fillCustomerInfo() {
        const user = JSON.parse(localStorage.getItem('bs_user'));
        if (user) {
            document.getElementById('customerName').value = user.fullname || '';
            document.getElementById('customerPhone').value = user.phone || '';
            document.getElementById('customerAddress').value = user.address || '';
        }
    }

    // === CHECKOUT LOGIC (Quan tr·ªçng nh·∫•t) ===

    function handleCheckout(event) {
        event.preventDefault(); // NgƒÉn ch·∫∑n form submit m·∫∑c ƒë·ªãnh
        
        // 1. L·∫•y gi·ªè h√†ng
        const cartItems = getCartItems();
        if (cartItems.length === 0) {
            alert('Gi·ªè h√†ng tr·ªëng. Vui l√≤ng th√™m s·∫£n ph·∫©m ƒë·ªÉ thanh to√°n.');
            return;
        }

        // 2. L·∫•y th√¥ng tin kh√°ch h√†ng (C√≥ th·ªÉ b·ªï sung validation chi ti·∫øt h∆°n)
        const name = document.getElementById('customerName').value;
        const address = document.getElementById('customerAddress').value;
        const phone = document.getElementById('customerPhone').value;
        const paymentMethod = document.getElementById('paymentMethod').value;

        if (!name || !address || !phone) {
            alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß H·ªç v√† t√™n, S·ªë ƒëi·ªán tho·∫°i, v√† ƒê·ªãa ch·ªâ.');
            return;
        }

        // 3. Th·ª±c hi·ªán c·∫≠p nh·∫≠t t·ªìn kho (Y√™u c·∫ßu c·ªßa b·∫°n)
        // **Gi·∫£ ƒë·ªãnh h√†m updateProductStock ƒë√£ ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a trong main.js** // **v√† c√≥ ch·ª©a logic th√™m lastStockUpdate timestamp**
        if (typeof updateProductStock === 'function') {
            updateProductStock(cartItems);
        } else {
             console.error("H√†m updateProductStock kh√¥ng t·ªìn t·∫°i. T·ªìn kho kh√¥ng ƒë∆∞·ª£c c·∫≠p nh·∫≠t.");
        }

        // 4. X√≥a gi·ªè h√†ng
        clearCart();

        // 5. Th√¥ng b√°o v√† chuy·ªÉn h∆∞·ªõng/render
        alert(`üéâ ƒê·∫∑t h√†ng th√†nh c√¥ng!
        C·∫£m ∆°n b·∫°n, ${name}. ƒê∆°n h√†ng c·ªßa b·∫°n s·∫Ω ƒë∆∞·ª£c giao ƒë·∫øn ${address} trong th·ªùi gian s·ªõm nh·∫•t.
        Ph∆∞∆°ng th·ª©c thanh to√°n: ${paymentMethod === 'cod' ? 'Thanh to√°n khi nh·∫≠n h√†ng' : 'Chuy·ªÉn kho·∫£n ng√¢n h√†ng'}.`);

        // T·∫£i l·∫°i trang/render l·∫°i gi·ªè h√†ng (gi·ªè h√†ng s·∫Ω hi·ªÉn th·ªã tr·∫°ng th√°i tr·ªëng)
        renderCart();
    }


    // === INITIALIZATION ===
    document.addEventListener('DOMContentLoaded', () => {
        renderCart();
        // Gi·∫£ ƒë·ªãnh updateCartCount c√≥ trong main.js ƒë·ªÉ c·∫≠p nh·∫≠t icon gi·ªè h√†ng
        if (typeof updateCartCount === 'function') updateCartCount();
    });

  </script>
</body>
</html>